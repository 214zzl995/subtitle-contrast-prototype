<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subtitle Contrast Prototype</title>
    <link rel="stylesheet" href="/static/style.css?v=4">
</head>
<body>
    <header>
        <h1>Subtitle Contrast Prototype</h1>
<div class="config-panel">
            <div class="config-item">
                <label for="frameA">Frame A:</label>
                <select id="frameA"></select>
            </div>
            <div class="config-item">
                <label for="frameB">Frame B:</label>
                <select id="frameB"></select>
            </div>
            <div class="config-item">
                <label for="muSub">μ_sub (0-255):</label>
                <input type="number" id="muSub" min="0" max="255" step="1" value="235">
            </div>
            <div class="config-item">
                <label for="deltaY">Δy (0-255):</label>
                <input type="number" id="deltaY" min="0" max="255" step="1" value="12">
            </div>
            <div class="config-item">
                <label for="searchRadius">Search Radius:</label>
                <input type="number" id="searchRadius" min="0" max="20" step="1" value="3">
            </div>
            <div class="config-item">
                <label for="algoVersion">Algorithm:</label>
                <select id="algoVersion">
                    <option value="v12.0" selected>v12.0 (核心+pHash+NCC)</option>
                    <option value="v11.0">v11.0 (TinyCLIP)</option>
                    <option value="v10.0">v10.0 (MobileNetV3-Small)</option>
                    <option value="v9.0">v9.0 (MobileCLIP2)</option>
                    <option value="v8.0">v8.0 (LPIPS-SqNet)</option>
                    <option value="v7.0">v7.0 (ImageHash)</option>
                    <option value="v6.0">v6.0 (skeleton+hash)</option>
                    <option value="v5.0">v5.0 (opencv chamfer)</option>
                    <option value="v4.0">v4.0 (partial chamfer)</option>
                    <option value="v3.0">v3.0 (adaptive)</option>
                    <option value="v1.1">v1.1 (enhanced)</option>
                    <option value="v1.0">v1.0 (baseline)</option>
                    <option value="v2.0">v2.0 (robust)</option>
                </select>
            </div>
                <div class="config-actions">
                    <button id="compareBtn">执行对比</button>
                </div>
        </div>
    </header>

    <main>
        <div class="content-wrapper">
            <div class="left-section">
                <div class="image-row">
                    <div class="image-header">
                        <h3>Frame A (选择ROI)</h3>
                        <div class="roi-info">
                            <span>ROI: X=<span id="roiX">0</span>, Y=<span id="roiY">0</span>, W=<span id="roiW">0</span>, H=<span id="roiH">0</span></span>
                        </div>
                    </div>
                    <div class="image-container">
                        <div class="canvas-wrapper">
                            <canvas id="canvasA"></canvas>
                        </div>
                    </div>
                </div>

                <div class="image-row">
                    <div class="image-header">
                        <h3>Frame B</h3>
                    </div>
                    <div class="image-container">
                        <div class="canvas-wrapper">
                            <canvas id="canvasB"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-section">
                <div class="right-row">
                    <div class="result-panel">
                        <h3>校验返回值</h3>
                        <div class="result-content">
                        <div class="result-item">
                            <label>Score:</label>
                            <span id="resultScore">-</span>
                        </div>
                        <div class="result-item">
                            <label>Confidence:</label>
                            <span id="resultConfidence">-</span>
                        </div>
                        <div class="result-item">
                            <label>Decision:</label>
                            <span id="resultDecision">-</span>
                        </div>
                        <div class="result-item">
                            <label>Delta (dx, dy):</label>
                            <span id="resultDelta">-</span>
                        </div>
                        <div class="result-item">
                            <label>Version:</label>
                            <span id="resultVersion">-</span>
                        </div>
                        <div class="result-item">
                            <label>Time (ms):</label>
                            <span id="resultLatency">-</span>
                        </div>
                        <div class="result-item">
                            <label>ROI (echo):</label>
                            <span id="resultRoi">-</span>
                        </div>
                        <div class="result-section">
                            <h4>Metrics:</h4>
                            <pre id="resultMetrics">{}</pre>
                        </div>
                            <div class="result-section">
                                <h4>原始响应:</h4>
                                <pre id="resultRaw">{}</pre>
                            </div>
                        </div>
                    </div>

                    <div class="visualization-panel">
                        <h3>预处理可视化</h3>
                        <div class="viz-grid">
                            <div class="viz-column">
                                <div class="viz-header">Frame A</div>
                                <div class="viz-title">预处理平面</div>
                                <img id="vizPreImageA" alt="Frame A preprocessed" />
                                <div class="viz-title">核心高亮</div>
                                <img id="vizOverlayImageA" alt="Frame A overlay" />
                            </div>
                            <div class="viz-column">
                                <div class="viz-header">Frame B</div>
                                <div class="viz-title">预处理平面</div>
                                <img id="vizPreImageB" alt="Frame B preprocessed" />
                                <div class="viz-title">核心高亮</div>
                                <img id="vizOverlayImageB" alt="Frame B overlay" />
                            </div>
                        </div>
                        <pre id="vizMetadata">{}</pre>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div id="status">Ready</div>
    </footer>

    <script src="/static/app.js?v=11"></script>
</body>
</html>
